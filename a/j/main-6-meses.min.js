var navbar = {};
var menuStatus = 0;


$(document).ready(function(){
	$('.menu-hotspot').on({
		click: function(){
			navbar.toggleMenu($(this).find('.menu-icon1'));
		}
	});

	
});




navbar.toggleMenu = function(e) {
	if(e.hasClass('menu-open')) {
		navbar.removeMenu();
		// e.toggleClass('menu-open');
		e.toggleClass('menu-open');
	}else{
		navbar.createMenu();
		// e.toggleClass('menu-open');
		e.toggleClass('menu-open');
	}
};

navbar.createMenu = function() {
	$('body').prepend('<div class="menu-holder"><div class="mobile-title"><p><span>Hurac&aacute;n Mar&iacute;a,</span> 6 historias, 6 meses despu&eacute;s</p></div><ul><li class="history-item"><a href="#"><h2>01.</h2><p>A m&aacute;s de 100 d&iacute;as y Puerto Rico todav&iacute;a est&aacute; en el apag&oacute;n m&aacutes largo en la historia.</p></a></li><li class="history-item"><a href="#"><h2>02.</h2><p>Reconstruyendo, un peque√±o gesto a la vez</p></a></li><li class="history-item"><a href="#"><h2>03.</h2><p>La vida en Puerto Rico luego de Mar&iacute;a</p></a></li><li class="history-item"><a href="#"><h2>04.</h2><p>En Puerto Rico, los artistas reconstruyen y ayudan</p></a></li><li class="history-item"><a href="#"><h2>05.</h2><p>C&oacute;mo es visitar San Juan ahora</p></a></li><li class="history-item"><a href="#"><h2>06.</h2><p>Puerto Rico est&aacute; cayendo en una crisis ambiental</p></a></li></ul></div>');
	$('.menu-holder').css({
		'right' : "-" + $('.menu-holder').width() + "px"
	});

	if($(document).width() < 765) {
		$('.menu-holder').css({
			'width' : "100%"
		});		

		$('body').css({'overflow-y':'hidden'});

		
	}else{
		$('body').prepend('<div class="navbar-close" onclick="navbar.bodyClose();"></div>');
		menuStatus = 1;
		

	}

	TweenMax.to($('.menu-holder'), .9, {'right':0, ease: Power3.easeOut});
};

navbar.removeMenu = function() {
	TweenMax.to($('.menu-holder'), .9, {'right':'-' + $('.menu-holder').width() + 'px', ease: Power3.easeOut, onComplete: function(){$('.menu-holder').remove();}});
	$('body').css({'overflow-y':'initial'});
	menuStatus = 0;
	$('.navbar-close').remove();
};


navbar.bodyClose = function() {
	// navbar.removeMenu();
	navbar.toggleMenu($('.menu-icon1'));
};









/*
*************************************************

Hero Slider

Author: Mike Henriquez - Front End Ninja
miguel.henriquez@gfrmedia.com

*************************************************
*/

var hero = {}, $currItem = 0;
var $sliderTime = 5000; //5000ms = 5seconds
var $heroItems = $('#hero-slider').find("li").length;

//Init

hero.Init = function () {
	
	for (i=0; i < $heroItems; i++) {
		var $heroItem = $('#hero-slider').find("li").eq(i);
		var $heroItemData = $heroItem.attr('data-img');		

		if($('.hero ul').hasClass("no-slide")) {
			$heroItem.css({
				'background' : 'url(' + $heroItemData + ') no-repeat ',
				'background-size':'cover'
			});
		}else{
			$heroItem.css({
				'background' : 'url(' + $heroItemData + ') no-repeat ',
				'background-size':'cover'
			});
		}
		
	}

	//Start Animation
	hero.Start();
};

//Start

hero.Start = function () {
	
	var firstItem = $('#hero-slider').find("li").eq(0);

	firstItem.show();
	TweenMax.to(firstItem, 1.8, {opacity:1});	
	hero.StartTrasnsitions();
	hero.Timer();

};

// Start Transitions

hero.StartTrasnsitions = function () {

	setInterval(function() {		
		hero.Timer();
	}, $sliderTime);
	
};

hero.Timer = function() {
	if($currItem < $heroItems) {
			
			var $prevItem = $currItem - 1;	
			TweenMax.to($('#hero-slider').find("li").eq($prevItem), 1.8, {opacity:0});	
			TweenMax.to($('#hero-slider').find("li").eq($currItem), 1.8, {opacity:1});	

			if($currItem === $heroItems){
				$currItem = 0;	
			}else{
				$currItem++;	
			}

		} else {

			TweenMax.to($('#hero-slider').find("li").eq($heroItems-1), 1.8, {opacity:0});	
			TweenMax.to($('#hero-slider').find("li").eq(0), 1.8, {opacity:1});	
			$currItem = 1;			
		}
};

hero.Init();

$(document).ready(function() {
	$('.historias-item').on({
		click: function(){
			var storyUrl = $(this).attr('data-url');
			window.location.href = storyUrl;
		},
		mouseover: function() {

			if($(document.body).hasClass('home')) {
				$(this).find('h4').css({'color':'#666666'});
				$(this).find('.uk-width-auto').find('.historia-image').addClass('historias-overlay-home');	
			} else {
				$(this).find('h4').css({'color':'#EDC054'});
				$(this).find('.uk-width-auto').find('.historia-image').addClass('historias-overlay');	
			}

			
		}, 
		mouseout: function() {
			
			if($(document.body).hasClass('home')) {
				$(this).find('h4').css({'color':'#1a1a1a'});
				$(this).find('.uk-width-auto').find('.historia-image').removeClass('historias-overlay-home');	
			} else {
				$(this).find('h4').css({'color':'#ffffff'});
				$(this).find('.uk-width-auto').find('.historia-image').removeClass('historias-overlay');	
			}
		}
	});
});


